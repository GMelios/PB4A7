<!DOCTYPE html>
<html lang="en"><head>
<link href="../../../figures/icons/course_favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Dr.&nbsp;George Melios">
  <meta name="dcterms.date" content="18 September 2023">
  <title>PB4A7 - Quantitative Applications for Behavioural Science - Controls</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="../../../css/styles_slides.css">
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="PB4A7 - Quantitative Applications for Behavioural Science - Controls">
<meta property="og:description" content="Telling endogeneity we’ve had ENOUGH">
<meta property="og:site-name" content="PB4A7 - Quantitative Applications for Behavioural Science">
<meta name="twitter:title" content="PB4A7 - Quantitative Applications for Behavioural Science - Controls">
<meta name="twitter:description" content="Telling endogeneity we’ve had ENOUGH">
<meta name="twitter:creator" content="@georgemelios">
<meta name="twitter:site" content="\www.georgemelios.com">
<meta name="twitter:card" content="summary">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block">
  <h1 class="title">Controls</h1>
  <p class="subtitle">Telling endogeneity we’ve had ENOUGH</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;<a href="#/">George Melios</a> 
</div>
        <p class="quarto-title-affiliation">
            <a href="#/">London School of Economics and Political Science</a>
          </p>
    </div>
</div>

  <p class="date">Updated 2023-09-21</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">What we will cover today:</h2>
<ul>
<li><a href="#/linear-regression---endogeneity" id="/toc-linear-regression---endogeneity">Linear Regression - Endogeneity</a></li>
<li><a href="#/recap" id="/toc-recap">Recap</a></li>
<li><a href="#/endogeneity-recap" id="/toc-endogeneity-recap">Endogeneity Recap</a></li>
<li><a href="#/to-the-rescue" id="/toc-to-the-rescue">To the Rescue</a></li>
<li><a href="#/to-the-rescue-1" id="/toc-to-the-rescue-1">To the Rescue</a></li>
<li><a href="#/how" id="/toc-how">How?</a></li>
<li><a href="#/example" id="/toc-example">Example</a></li>
<li><a href="#/example-1" id="/toc-example-1">Example</a></li>
<li><a href="#/example-2" id="/toc-example-2">Example</a></li>
<li><a href="#/example-3" id="/toc-example-3">Example</a></li>
<li><a href="#/example-4" id="/toc-example-4">Example</a></li>
<li><a href="#/graphically" id="/toc-graphically">Graphically</a></li>
<li><a href="#/controlling" id="/toc-controlling">Controlling</a></li>
<li><a href="#/a-continuous-control" id="/toc-a-continuous-control">A Continuous Control</a></li>
<li><a href="#/what-do-we-get" id="/toc-what-do-we-get">What do we get?</a></li>
<li><a href="#/concept-checks" id="/toc-concept-checks">Concept Checks</a></li>
<li><a href="#/have-we-solved-it" id="/toc-have-we-solved-it">Have We Solved It?</a></li>
<li><a href="#/causal-diagrams" id="/toc-causal-diagrams">Causal Diagrams</a></li>
<li><a href="#/drawing-a-diagram" id="/toc-drawing-a-diagram">Drawing a Diagram</a></li>
<li><a href="#/drawing-a-diagram-1" id="/toc-drawing-a-diagram-1">Drawing a Diagram</a></li>
<li><a href="#/drawing-a-diagram-2" id="/toc-drawing-a-diagram-2">Drawing a Diagram</a></li>
<li><a href="#/detailing-paths" id="/toc-detailing-paths">Detailing Paths</a></li>
<li><a href="#/preschool-and-adult-earnings" id="/toc-preschool-and-adult-earnings">Preschool and Adult Earnings</a></li>
<li><a href="#/paths" id="/toc-paths">Paths</a></li>
<li><a href="#/closing-paths" id="/toc-closing-paths">Closing Paths</a></li>
<li><a href="#/and-the-bad-news" id="/toc-and-the-bad-news">And the Bad News…</a></li>
<li><a href="#/and-the-bad-news-1" id="/toc-and-the-bad-news-1">And the Bad News…</a></li>
<li><a href="#/an-example" id="/toc-an-example">An Example</a></li>
<li><a href="#/the-diagram" id="/toc-the-diagram">The Diagram</a></li>
<li><a href="#/the-paths" id="/toc-the-paths">The Paths</a></li>
<li><a href="#/the-adjusted-analysis" id="/toc-the-adjusted-analysis">The Adjusted Analysis</a></li>
<li><a href="#/concept-checks-1" id="/toc-concept-checks-1">Concept Checks</a></li>
</ul>
</nav>
</section>
<section>
<section id="linear-regression---endogeneity" class="title-slide slide level1">
<h1>Linear Regression - Endogeneity</h1>
<ul>
<li>Last week was all about handling sampling variation and avoiding inference error</li>
<li>This week we’re all about endogeneity!</li>
<li>Where it pops up and what we can do about it</li>
<li>At least as a starter (we’ll revisit this topic many times)</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="recap" class="title-slide slide level1">
<h1>Recap</h1>
<ul>
<li>We believe that our true model looks like this:</li>
</ul>
<p><span class="math display">\[Y = \beta_0 + \beta_1X+\varepsilon\]</span></p>
<ul>
<li>Where <span class="math inline">\(\varepsilon\)</span> is <em>everything that determines <span class="math inline">\(Y\)</span> other than <span class="math inline">\(X\)</span></em></li>
<li>If <span class="math inline">\(X\)</span> is related to some of those things, we have endogeneity</li>
<li>Estimating the above model by OLS, it will mistake the effect of those <em>other</em> things for the effect of <span class="math inline">\(X\)</span>, and our estimate of <span class="math inline">\(\hat{\beta}_1\)</span> won’t represent the true <span class="math inline">\(\beta_1\)</span> no matter how many observations we have</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="endogeneity-recap" class="title-slide slide level1">
<h1>Endogeneity Recap</h1>
<ul>
<li>For example looking at income and corruption, the model</li>
</ul>
<p><span class="math display">\[Income = \beta_0 + \beta_1Corruption + \varepsilon\]</span></p>
<ul>
<li>The true <span class="math inline">\(\beta_1\)</span> is probably <span class="math inline">\(0\)</span>. But since <span class="math inline">\(Political Stability\)</span> is in <span class="math inline">\(\varepsilon\)</span> and <span class="math inline">\(olitical Stability\)</span> is related to <span class="math inline">\(Corruption\)</span>, OLS will mistakenly assign the effect of <span class="math inline">\(olitical Stability\)</span> to the effect of <span class="math inline">\(Corruption\)</span>, making it look like there’s a positive effect when there isn’t one</li>
<li>If <span class="math inline">\(olitical Stability\)</span> hangs around <span class="math inline">\(Corruption\)</span>, but OLS doesn’t know about it, OLS will give <span class="math inline">\(Corruption\)</span> all the credit for <span class="math inline">\(olitical Stability\)</span>’s impact on <span class="math inline">\(Income\)</span></li>
<li>Here we’re mistakenly finding a positive effect when the truth is <span class="math inline">\(0\)</span>, but it could be anything - negative effect when truth is <span class="math inline">\(0\)</span>, positive effect when the truth is a bigger/smaller positive effect, negative effect when truth is positive, etc. etc.</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="to-the-rescue" class="title-slide slide level1">
<h1>To the Rescue</h1>
<ul>
<li>One way we can solve this problem is through the use of <em>control variables</em></li>
<li>What if <span class="math inline">\(Political Stability\)</span> <em>weren’t</em> in <span class="math inline">\(\varepsilon\)</span>? Then we’d be fine! OLS would know how to separate out its effect from the <span class="math inline">\(Corruption\)</span> effect. How do we take it out? Just put it in the model directly!</li>
</ul>
<p><span class="math display">\[Income = \beta_0 + \beta_1Corruption + \beta_2PoliticalStability + \varepsilon\]</span></p>
<ul>
<li>Now we have a <em>multivariate</em> regression model. Our estimate <span class="math inline">\(\hat{\beta}_1\)</span> will <em>not</em> be biased by <span class="math inline">\(Political Stability\)</span> because we’ve controlled for it</li>
</ul>
<p><span style="font-size: small">(probably more accurate to say “covariates” or “variables to adjust for” than “control variables” and “adjust for” rather than “control for” but hey what are you gonna do, “control” is standard)</span></p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="to-the-rescue-1" class="title-slide slide level1">
<h1>To the Rescue</h1>
<ul>
<li>So the task of solving our endogeneity problems in estimating <span class="math inline">\(\beta_1\)</span> using <span class="math inline">\(\hat{\beta}_1\)</span> comes down to us <em>finding all the elements of <span class="math inline">\(\varepsilon\)</span> that are related to <span class="math inline">\(X\)</span> and adding them to the model</em></li>
<li>As we add them, they leave <span class="math inline">\(\varepsilon\)</span> and hopefully we end up with a version of <span class="math inline">\(\varepsilon\)</span> that is no longer related to <span class="math inline">\(X\)</span></li>
<li>If <span class="math inline">\(cov(X,\varepsilon) = 0\)</span> then we have an unbiased estimate!</li>
<li>(of course, we have no way of checking if that’s true - it’s based on what we think the data generating process looks like)</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="how" class="title-slide slide level1">
<h1>How?</h1>
<ul>
<li>How does this actually work?</li>
<li>Controlling for a variable works by <em>removing variation in <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> that is explained by the control variable</em></li>
<li>So our estimate of <span class="math inline">\(\hat{\beta}_1\)</span> is based on <em>just the variation in <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> that is unrelated to the control variable</em></li>
<li>Any accidentally-assigning-the-value-of-PoliticalStability-to-Corruption can’t happen because we’ve removed the effect of <span class="math inline">\(Political Stability\)</span> on <span class="math inline">\(Corruption\)</span> as well as the effect of <span class="math inline">\(Political Stability\)</span> on <span class="math inline">\(Income\)</span></li>
<li>We’re asking at that point, <em>holding <span class="math inline">\(Political Stability\)</span> constant</em>, i.e.&nbsp;<em>comparing two different countries with the same <span class="math inline">\(Polities\)</span> </em>, how is <span class="math inline">\(Corruption\)</span> related to <span class="math inline">\(Income\)</span>?</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example" class="title-slide slide level1">
<h1>Example</h1>
<p>The true effect is <span class="math inline">\(\beta_1 = 3\)</span>. Notice <span class="math inline">\(Z\)</span> is binary and is related to <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> but isn’t in the model!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Z =</span> <span class="dv">1</span><span class="sc">*</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>) <span class="sc">&gt;</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="fu">mutate</span>(<span class="at">X =</span> Z <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="fu">mutate</span>(<span class="at">Y =</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>X <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>Z <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>))</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">feols</span>(Y<span class="sc">~</span>X, <span class="at">data =</span> tib) <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                .
Dependent Var.:                 Y
                                 
Constant        2.756*** (0.0461)
X               3.421*** (0.0383)
_______________ _________________
S.E. type                     IID
Observations                1,000
R2                        0.88897
Adj. R2                   0.88886
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example-1" class="title-slide slide level1">
<h1>Example</h1>
<p>To remove what part of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> is explained by <span class="math inline">\(Z\)</span>, we can get the mean of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> by values of <span class="math inline">\(Z\)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>tib <span class="ot">&lt;-</span> tib <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">group_by</span>(Z) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">mutate</span>(<span class="at">Y_mean =</span> <span class="fu">mean</span>(Y), <span class="at">X_mean =</span> <span class="fu">mean</span>(X))</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">head</span>(tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
# Groups:   Z [2]
      Z       X      Y Y_mean  X_mean
  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1     1  0.855   5.98    6.91  0.967 
2     1 -1.59   -0.226   6.91  0.967 
3     1  0.806   6.08    6.91  0.967 
4     1 -0.0302  2.94    6.91  0.967 
5     0 -0.490  -0.997   1.95 -0.0121
6     0 -0.512   0.383   1.95 -0.0121</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example-2" class="title-slide slide level1">
<h1>Example</h1>
<p>Now, <code>Y_mean</code> and <code>X_mean</code> are the mean of <code>Y</code> and <code>X</code> for the values of <code>Z</code>, i.e.&nbsp;the part of <code>Y</code> and <code>X</code> <em>explained by <code>Z</code></em>. So subtract those parts out to get <em>residuals</em> <code>Y_res</code> and <code>X_res</code>!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>tib <span class="ot">&lt;-</span> tib <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">mutate</span>(<span class="at">Y_res =</span> Y <span class="sc">-</span> Y_mean, <span class="at">X_res =</span> X <span class="sc">-</span> X_mean)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">head</span>(tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
# Groups:   Z [2]
      Z       X      Y Y_mean  X_mean  Y_res  X_res
  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1     1  0.855   5.98    6.91  0.967  -0.928 -0.113
2     1 -1.59   -0.226   6.91  0.967  -7.14  -2.55 
3     1  0.806   6.08    6.91  0.967  -0.827 -0.161
4     1 -0.0302  2.94    6.91  0.967  -3.98  -0.997
5     0 -0.490  -0.997   1.95 -0.0121 -2.95  -0.478
6     0 -0.512   0.383   1.95 -0.0121 -1.57  -0.499</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example-3" class="title-slide slide level1">
<h1>Example</h1>
<p>What do we get now?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">feols</span>(Y_res <span class="sc">~</span> X_res, <span class="at">data =</span> tib) <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                .
Dependent Var.:             Y_res
                                 
Constant        5.73e-17 (0.0319)
X_res           3.030*** (0.0319)
_______________ _________________
S.E. type                     IID
Observations                1,000
R2                        0.90060
Adj. R2                   0.90050
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example-4" class="title-slide slide level1">
<h1>Example</h1>
<p>Compare this to actually including <code>Z</code> as a control:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">feols</span>(Y <span class="sc">~</span> X <span class="sc">+</span> Z, <span class="at">data =</span> tib) <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">etable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                .
Dependent Var.:                 Y
                                 
Constant        1.988*** (0.0441)
X               3.030*** (0.0319)
Z               1.993*** (0.0712)
_______________ _________________
S.E. type                     IID
Observations                1,000
R2                        0.93782
Adj. R2                   0.93769
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="graphically" class="title-slide slide level1">
<h1>Graphically</h1>

<img data-src="slides_files/figure-html/unnamed-chunk-7-1.gif" class="img-fluid r-stretch"></section>
<section class="slide level2">

</section></section>
<section>
<section id="controlling" class="title-slide slide level1">
<h1>Controlling</h1>
<ul>
<li>We achieve all this just by adding the variable to the OLS equation!</li>
<li>We can, of course, include more than one control, or controls that aren’t binary</li>
<li>Use OLS to predict <span class="math inline">\(X\)</span> using all the controls, then take the residual (the part not explained by the controls)</li>
<li>Use OLS to predict <span class="math inline">\(Y\)</span> using all the controls, then take the residual (the part not explained by the controls)</li>
<li>Now do OLS of just the <span class="math inline">\(Y\)</span> residuals on just the <span class="math inline">\(X\)</span> residuals</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="a-continuous-control" class="title-slide slide level1">
<h1>A Continuous Control</h1>
<figure>
<img src="../../../2023/weeks/week04/linear_control.gif" alt="Linear controls" style="width:15em;height:15em;font-size:1em;" class="img-responsive atto_image_button_text-bottom">
</figure>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="what-do-we-get" class="title-slide slide level1">
<h1>What do we get?</h1>
<ul>
<li>We can remove some of the relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(\varepsilon\)</span></li>
<li>Potentially all of it, making <span class="math inline">\(\hat{\beta}_1\)</span> us an <em>unbiased</em> (i.e.&nbsp;correct on average, but sampling variation doesn’t go away!) estimate of <span class="math inline">\(\beta_1\)</span></li>
<li>Maybe we can also get some estimates of <span class="math inline">\(\beta_2\)</span>, <span class="math inline">\(\beta_3\)</span>… but be careful, they’re subject to the same identification and endogeneity problems!</li>
<li>Often in econometrics we focus on getting <em>one</em> parameter, <span class="math inline">\(\hat{\beta}_1\)</span>, exactly right and don’t focus on parameters we haven’t put much effort into identifying</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="concept-checks" class="title-slide slide level1">
<h1>Concept Checks</h1>
<ul>
<li>Selene is a huge bore at parties, but sometimes brings her girlfriend Donna who is super fun. If you regressed <span class="math inline">\(PartyFunRating\)</span> on <span class="math inline">\(SeleneWasThere\)</span> but not <span class="math inline">\(DonnaWasThere\)</span>, what would the coefficient on <span class="math inline">\(SeleneWasThere\)</span> look like and why?</li>
<li>Describe the steps necessary to estimate the effect of <span class="math inline">\(Exports\)</span> on <span class="math inline">\(GrowthRate\)</span> while controlling for <span class="math inline">\(AmountofConflict\)</span> (a continuous variable). There are three “explain/regress” steps and two “subtract” steps.</li>
<li>If we estimate the same <span class="math inline">\(\hat{\beta}_1\)</span> with or without <span class="math inline">\(Z\)</span> added as a control, does that mean we have no endogeneity problem? What <em>does</em> it mean exactly?</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="have-we-solved-it" class="title-slide slide level1">
<h1>Have We Solved It?</h1>
<ul>
<li>Including controls for every part of (what used to be) <span class="math inline">\(\varepsilon\)</span> that is related to <span class="math inline">\(X\)</span> clears up any endogeneity problem we had with <span class="math inline">\(X\)</span></li>
<li>So… when we add a control, does that do it? How do we know?</li>
<li>Inconveniently, the data alone will never tell us if we’ve solved endogeniety</li>
<li>We can’t just check <span class="math inline">\(X\)</span> against the remaining <span class="math inline">\(\varepsilon\)</span> because we never <em>see</em> <span class="math inline">\(\varepsilon\)</span> - what we have left over after a regression is the real-world <em>residual</em>, not the true-model <em>error</em></li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="causal-diagrams" class="title-slide slide level1">
<h1>Causal Diagrams</h1>
<ul>
<li>“What do I have to control for to solve the endogeneity problem” is an important and difficult question!</li>
<li>To answer it we need to think about the data-generating process</li>
<li>One way to do that is to draw a <em>causal diagram</em></li>
<li>A causal diagram describes the variables responsible for generating data and how they cause each other</li>
<li>Once we have written down our diagram, we’ll know what we need to control for</li>
<li>(hopefully we have data on everything we need to control for! Often we don’t)</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="drawing-a-diagram" class="title-slide slide level1">
<h1>Drawing a Diagram</h1>
<ul>
<li>Endogeneity is all about the <em>alternate reasons why</em> two variables might be related *other than the causal effect you want</li>
<li>We can represent <em>all</em> the reasons two variables are related with a diagram</li>
<li>Put down on paper how you think the world works, and where you think the data came from! This is economic modeling but with less math</li>
</ul>
<ol type="1">
<li>List out all the variables relevant to the DGP (including the ones we can’t measure or put our finger on!)</li>
<li>Draw arrows between them reflecting what causes what else</li>
<li>List all the paths from <span class="math inline">\(X\)</span> to <span class="math inline">\(Y\)</span> - these paths are reasons why <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are related!</li>
<li>Control for at least one variable on each path you <em>want to close</em> (isn’t the effect you want)</li>
</ol>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="drawing-a-diagram-1" class="title-slide slide level1">
<h1>Drawing a Diagram</h1>

<img data-src="slides_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="drawing-a-diagram-2" class="title-slide slide level1">
<h1>Drawing a Diagram</h1>
<ul>
<li>We observe that, in the data, <span class="math inline">\(ShortsWearing\)</span> and <span class="math inline">\(IceCreamEating\)</span> are related. Why?</li>
<li>Maybe, we theorize, that wearing shorts causes you to eat ice cream ( <span class="math inline">\(ShortsWearing \rightarrow IceCreamEating\)</span> )</li>
<li>However, there’s another explanation/path: <span class="math inline">\(Temperature\)</span> causes both ( <span class="math inline">\(ShortsWearing \leftarrow Temperature \rightarrow IceCreamEating\)</span> )</li>
<li>We need to control for temperature to <em>close this path!</em></li>
<li>Once it’s closed, the only path left is <span class="math inline">\(ShortsWearing \rightarrow IceCreamEating\)</span>, so if we <em>do</em> see a relationship still in the data, we know we’ve identified the causal effect</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="detailing-paths" class="title-slide slide level1">
<h1>Detailing Paths</h1>
<ul>
<li>The goal is to list all the paths that go from the <em>cause</em> of our choice to the <em>outcome</em> variable (no loops)</li>
<li>That way we know what we need to control for to close the paths!</li>
<li>Control for any one variable on the path, and suddenly there’s no variation from that variable any more - the causal chain is broken and the path is closed!</li>
<li>A path counts no matter which direction the arrows point on it (the arrow direction matters but we’ll get to that next time)</li>
<li>If the path isn’t part of what answers our research question, it’s a <em>back door</em> we want to be closed</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="preschool-and-adult-earnings" class="title-slide slide level1">
<h1>Preschool and Adult Earnings</h1>
<p>Does going to preschool improve your earnings as an adult?</p>

<img data-src="slides_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="paths" class="title-slide slide level1">
<h1>Paths</h1>
<ol type="1">
<li><span class="math inline">\(Preschool \rightarrow Earnings\)</span></li>
<li><span class="math inline">\(Preschool \rightarrow Skills \rightarrow Earnings\)</span></li>
<li><span class="math inline">\(Preschool \leftarrow Location \rightarrow Earnings\)</span></li>
<li><span class="math inline">\(Preschool \leftarrow Background \rightarrow Earnings\)</span></li>
<li><span class="math inline">\(Preschool \leftarrow Background \rightarrow Skills \rightarrow Earnings\)</span></li>
<li><span class="math inline">\(Preschool \rightarrow Skills \leftarrow Background \rightarrow Earnings\)</span></li>
</ol>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="closing-paths" class="title-slide slide level1">
<h1>Closing Paths</h1>
<ul>
<li>We want the ways that <span class="math inline">\(Preschool\)</span> causes <span class="math inline">\(Earnings\)</span> - that’s the first two, <span class="math inline">\(Preschool \rightarrow Earnings\)</span> and <span class="math inline">\(Preschool \rightarrow Skills \rightarrow Earnings\)</span></li>
<li>The rest we want to close! They’re <em>back doors</em></li>
<li><span class="math inline">\(Location\)</span> is on #3, so if we control for <span class="math inline">\(Location\)</span>, 3 is closed</li>
<li><span class="math inline">\(Background\)</span> is on the rest, so if we control for <span class="math inline">\(Background\)</span>, the rest are closed</li>
<li>So if we estimate the below OLS equation, <span class="math inline">\(\hat{\beta}_1\)</span> will be unbiased!</li>
</ul>
<p><span class="math display">\[Earnings = \beta_0 + \beta_1Preschool + \beta_2Location + \beta_3Background+\varepsilon\]</span></p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="and-the-bad-news" class="title-slide slide level1">
<h1>And the Bad News…</h1>
<ul>
<li>This assumes that <em>the model we drew was accurate</em>. Did we leave any important variables or arrows out? Think hard!</li>
<li>What other variables might belong on this graph? Would they be on a path that gives an alternate explanation?</li>
<li>Just because we <em>say</em> that’s the model doesn’t magically make it the <em>actual model!</em> It needs to be right! Use that economic theory and common sense to think about missing parts of the graph</li>
<li>Also, <em>can</em> we control for those things? What would it mean to assign a single number for <span class="math inline">\(Background\)</span> to someone? Or if we’re representing <span class="math inline">\(Background\)</span> with multiple variables - race, gender, parental income, etc., how do we know if we’ve fully covered it?</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="and-the-bad-news-1" class="title-slide slide level1">
<h1>And the Bad News…</h1>
<ul>
<li>Regardless, this is the kind of thinking (whether or not you do that thinking <em>with a causal diagram</em>) we have to do to figure out how to identify things by controlling for variables</li>
<li>There’s no way to get around having to make these sorts of assumptions if we want to identify a causal effect</li>
<li>Really! No way at all! Even experiments have assumptions</li>
<li>The key is not avoiding assumptions, but making sure they’re reasonable, and verifying those assumptions where you can</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="an-example" class="title-slide slide level1">
<h1>An Example</h1>
<ul>
<li>Let’s back off of those concerns a moment and generate the data ourselves so we know the truth!</li>
<li>In the below data generating process, what is the true effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>?</li>
<li>Let’s figure out how to draw the causal diagram for this data generating process!</li>
<li>(note: <code>U1</code>, <code>U2</code>, etc., often stand in as an unobserved common cause for two variables that are <em>correlated</em> but we think neither causes the other)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>tib2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">U1 =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>), <span class="at">A =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>), <span class="at">B =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(<span class="at">C =</span> U1 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>), <span class="at">D =</span> U1 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">mutate</span>(<span class="at">X =</span> A <span class="sc">+</span> C <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="fu">mutate</span>(<span class="at">Y =</span> <span class="dv">4</span><span class="sc">*</span>X <span class="sc">+</span> A <span class="sc">+</span> B <span class="sc">+</span> D <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>))</span>
<span id="cb11-5"><a href="#cb11-5"></a>m1 <span class="ot">&lt;-</span> <span class="fu">feols</span>(Y<span class="sc">~</span>X, <span class="at">data =</span> tib)</span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="fu">coef</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)           X 
   2.756197    3.420627 </code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="the-diagram" class="title-slide slide level1">
<h1>The Diagram</h1>
<ul>
<li>Here’s the diagram we can draw from that information. What paths are there from <code>X</code> to <code>Y</code>?</li>
</ul>

<img data-src="slides_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="the-paths" class="title-slide slide level1">
<h1>The Paths</h1>
<ol type="1">
<li><span class="math inline">\(X \rightarrow Y\)</span></li>
<li><span class="math inline">\(X \leftarrow A \rightarrow Y\)</span></li>
<li><span class="math inline">\(X \leftarrow C \leftarrow U_1 \rightarrow D \rightarrow Y\)</span></li>
</ol>
<p>What do we <em>need</em> to control for to close all the paths we don’t want? Assume we can’t observe (and so can’t control for) <span class="math inline">\(U_1\)</span></p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="the-adjusted-analysis" class="title-slide slide level1">
<h1>The Adjusted Analysis</h1>
<ul>
<li>Remember, the true <span class="math inline">\(\beta_1\)</span> was 4</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                               m1                 m2                 m3
Dependent Var.:                 Y                  Y                  Y
                                                                       
Constant        2.756*** (0.0461)   -0.0261 (0.0584)    0.0218 (0.0455)
X               3.421*** (0.0383)  4.004*** (0.0600)  4.003*** (0.0290)
A                                  1.044*** (0.0846) 0.9848*** (0.0549)
C                                 0.4827*** (0.0739)                   
D                                                    0.9827*** (0.0368)
_______________ _________________ __________________ __________________
S.E. type                     IID                IID                IID
Observations                1,000              1,000              1,000
R2                        0.88897            0.96089            0.97624
Adj. R2                   0.88886            0.96077            0.97617
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section id="concept-checks-1" class="title-slide slide level1">
<h1>Concept Checks</h1>
<ul>
<li>Why did we only need to control for <span class="math inline">\(C\)</span> <em>or</em> <span class="math inline">\(D\)</span> in that last example?</li>
<li>Draw a graph with five variables on it: <span class="math inline">\(X\)</span>, <span class="math inline">\(Y\)</span>, <span class="math inline">\(A\)</span>, <span class="math inline">\(B\)</span>, <span class="math inline">\(C\)</span>. Then draw arrows at them completely at random (except to ensure there’s no “loop” where you can follow an arrow path from arrow base to head and end up where you started). Then list every path from <span class="math inline">\(X\)</span> to <span class="math inline">\(Y\)</span> and say what you’d need to control for to identify the effect</li>
<li>What would you need to control for to estimate the effect of “drinking a glass of wine a day” on “lifespan”? Draw a diagram.</li>
</ul>


<img src="../../../figures/logos/MY_INSTITUTION.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p>PB4A7- Quantitative Applications for Behavioural Science</p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>