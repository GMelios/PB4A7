<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;George Melios">
<meta name="dcterms.date" content="18 September 2023">

<title>PB4A7 - Quantitative Applications for Behavioural Science - 🗓️ Week 0 Presessionals</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../figures/icons/course_favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../css/custom_style.css">
<link rel="stylesheet" href="../../../css/syllabus.css">
<meta property="og:title" content="PB4A7 - Quantitative Applications for Behavioural Science - 🗓️ Week 0 Presessionals">
<meta property="og:description" content="PB4A7- Quantitative Applications for Behavioural Science">
<meta property="og:image" content="../../../figures/people/George.jpeg">
<meta property="og:site-name" content="PB4A7 - Quantitative Applications for Behavioural Science">
<meta name="twitter:title" content="PB4A7 - Quantitative Applications for Behavioural Science - 🗓️ Week 0 Presessionals">
<meta name="twitter:description" content="PB4A7- Quantitative Applications for Behavioural Science">
<meta name="twitter:image" content="../../../figures/people/George.jpeg">
<meta name="twitter:creator" content="@georgemelios">
<meta name="twitter:site" content="\www.georgemelios.com">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">PB4A7 - Quantitative Applications for Behavioural Science</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><font style="font-size:1em;">🗓️ Week 0<br> Presessionals</font></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">🏠 Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">🗓️ Weeks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week01/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 01</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">👨‍🏫 Lecture Material</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">What we will cover today:</h2>
   
  <ul>
  <li><a href="#who-are-we" id="toc-who-are-we" class="nav-link active" data-scroll-target="#who-are-we">Who are we</a></li>
  <li><a href="#welcome-to-econometrics" id="toc-welcome-to-econometrics" class="nav-link" data-scroll-target="#welcome-to-econometrics">Welcome to Econometrics</a></li>
  <li><a href="#welcome-to-econometrics-1" id="toc-welcome-to-econometrics-1" class="nav-link" data-scroll-target="#welcome-to-econometrics-1">Welcome to Econometrics</a></li>
  <li><a href="#welcome-to-econometrics-2" id="toc-welcome-to-econometrics-2" class="nav-link" data-scroll-target="#welcome-to-econometrics-2">Welcome to Econometrics</a></li>
  <li><a href="#admin" id="toc-admin" class="nav-link" data-scroll-target="#admin">Admin</a></li>
  <li><a href="#causality-and-prediction" id="toc-causality-and-prediction" class="nav-link" data-scroll-target="#causality-and-prediction">Causality and Prediction</a></li>
  <li><a href="#causality-and-prediction-1" id="toc-causality-and-prediction-1" class="nav-link" data-scroll-target="#causality-and-prediction-1">Causality and Prediction</a></li>
  <li><a href="#causality-and-prediction-2" id="toc-causality-and-prediction-2" class="nav-link" data-scroll-target="#causality-and-prediction-2">Causality and Prediction</a></li>
  <li><a href="#inference-error-and-randomness" id="toc-inference-error-and-randomness" class="nav-link" data-scroll-target="#inference-error-and-randomness">Inference Error and Randomness</a></li>
  <li><a href="#inference-error-and-randomness-1" id="toc-inference-error-and-randomness-1" class="nav-link" data-scroll-target="#inference-error-and-randomness-1">Inference Error and Randomness</a></li>
  <li><a href="#inference-error-and-randomness-2" id="toc-inference-error-and-randomness-2" class="nav-link" data-scroll-target="#inference-error-and-randomness-2">Inference Error and Randomness</a></li>
  <li><a href="#identification-error" id="toc-identification-error" class="nav-link" data-scroll-target="#identification-error">Identification Error</a></li>
  <li><a href="#identification-error-1" id="toc-identification-error-1" class="nav-link" data-scroll-target="#identification-error-1">Identification Error</a></li>
  <li><a href="#data-generating-process" id="toc-data-generating-process" class="nav-link" data-scroll-target="#data-generating-process">Data Generating Process</a></li>
  <li><a href="#data-generating-process-1" id="toc-data-generating-process-1" class="nav-link" data-scroll-target="#data-generating-process-1">Data Generating Process</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><font style="font-size:1em;">🗓️ Week 0<br> Presessionals</font></h1>
<p class="subtitle lead">PB4A7- Quantitative Applications for Behavioural Science</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr.&nbsp;<a href="#">George Melios</a> </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="#">London School of Economics and Political Science</a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">18 Sep 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="who-are-we" class="level1">
<h1>Who are we</h1>
<section id="your-lecturer" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="your-lecturer">Your lecturer</h2>
<div class="columns">
<div class="column" style="display:inline-block;width:40%;height:60%;border-radius:1em;margin:1%;padding:1.5%;background-color:#f5f5f5">
<figure class="figure">
<img src="../../../figures/people/George.jpeg" alt="Photo of George" role="presentation" style="object-fit: cover;width:5em;height:5em;border-radius: 50%;font-size:1em;" class="img-responsive atto_image_button_text-bottom figure-img">
<figcaption class="figure-caption">
<strong>Dr.&nbsp;<span><a href="#" target="_blank" class="external">Melios</a></span></strong> <br>Research Fellow
</figcaption>
</figure>
</div><div class="column" style="width:50%;font-size:0.85em;margin-left:3%;">
<ul>
<li>PhD in Economics</li>
<li><strong>Background</strong>: Economics, Political Science, Behavioural Science</li>
</ul>
<p><span class="tag" style="background-color:var(--quarto-hl-st-color)">Political Economy</span> <br> <span class="tag" style="background-color:var(--quarto-hl-fu-color)">Beliefs</span> <br> <span class="tag" style="background-color:var(--quarto-hl-dv-color)">Wellbeing</span></p>
</div>
</div>
</section>
</section>
<section id="welcome-to-econometrics" class="level1">
<h1>Welcome to Econometrics</h1>
<section id="what-is-this-class" class="level2">
<h2 class="anchored" data-anchor-id="what-is-this-class">What is this class</h2>
<ul>
<li>This is econometrics</li>
<li>Econometrics is a field that covers how economists think about statistical analysis</li>
<li>Many other social science fields (and fields like epidemiology) have picked up econometric tools as well becuase of how useful they tend to be</li>
</ul>
<hr>
<ul>
<li>So what is econometrics?</li>
<li>Econometrics focuses on the study of <em>observational data</em></li>
<li>Observational data are measurements of things that <em>the researcher does not control</em></li>
<li>Given that we are working with observational data, we still want to understand the <em>causes of things</em></li>
<li>The world is what it is, we are only here to study it</li>
</ul>
<hr>
</section>
</section>
<section id="welcome-to-econometrics-1" class="level1">
<h1>Welcome to Econometrics</h1>
<ul>
<li>When is this useful?</li>
<li>We can’t randomly assign or experiment with things like how much education you get, or what our tax rates are, or what a stock’s recent returns have been, or where you live - that would generally be impossible or cruel</li>
<li>But we still want to learn about the <em>underlying patterns</em> related to those data - how does X cause Y? What is the correct model to use to understand X and Y?</li>
<li>That would be simple if we could control the situation, turn things on and off, randomize stuff</li>
<li>But we can’t! So what now? Enter econometrics.</li>
</ul>
<hr>
</section>
<section id="welcome-to-econometrics-2" class="level1">
<h1>Welcome to Econometrics</h1>
<ul>
<li>This is a great course (if I do say so)</li>
<li>When I took it, what it left me feeling was <em>powerful</em></li>
<li>It gave me the ability to answer questions I was interested in on my own</li>
<li>And to understand the degree of confidence I could have in my own results and in others</li>
<li>“A new study says…” you don’t need to take the paper’s word for that any more!</li>
</ul>
<hr>
</section>
<section id="admin" class="level1">
<h1>Admin</h1>
<ul>
<li>Review the syllabus (and other materials on Canvas). Reading assignments there</li>
<li>Our textbook is <a href="https://theeffectbook.net">The Effect</a>, by me, which can be read for free.</li>
<li>Also these slides</li>
<li>Programming in R: free, you will want to have access to it. We will get to this next time</li>
<li>Assignments: Weekly homework combining econometrics and R tasks</li>
<li>There is a midterm and a final</li>
<li>A data exploration project</li>
<li>A group data analysis project</li>
<li>And completion of Swirl modules and online discussion</li>
</ul>
<hr>
</section>
<section id="causality-and-prediction" class="level1">
<h1>Causality and Prediction</h1>
<ul>
<li>Okay so what are we doing here exactly?</li>
<li>In econometrics, we are working with data</li>
<li>Statisticians also work with data</li>
<li>So do data scientists</li>
<li>The <em>goals</em> for these groups differ considerably</li>
</ul>
<hr>
</section>
<section id="causality-and-prediction-1" class="level1">
<h1>Causality and Prediction</h1>
<ul>
<li>Data scientists are generally concerned with <em>prediction</em></li>
<li>They want to use the data at hand to <em>predict</em> what comes next</li>
<li>They generally don’t care <em>why</em> they’re making the prediction they are</li>
<li>This can be really handy for certain tasks - “is this picture a cat or a dog?” “what’s the probability that a customer with qualities X, Y, and Z will end up purchasing our good?” “do you have lymphoma?”</li>
</ul>
<hr>
</section>
<section id="causality-and-prediction-2" class="level1">
<h1>Causality and Prediction</h1>
<ul>
<li>Econometricians, on the other hand, care almost exclusively about <em>why</em></li>
<li>Data scientists want to minimize <em>prediction error</em></li>
<li>Econometricians want to minimize <em>inference</em> and <em>identification error</em></li>
<li>We want to correctly understand <em>the underlying data generating process</em></li>
</ul>
<hr>
</section>
<section id="inference-error-and-randomness" class="level1">
<h1>Inference Error and Randomness</h1>
<ul>
<li>One big problem we face when trying to figure out how variables relate to each other is <em>randomness</em></li>
<li>This is simply the fact that, when we gather data, we can only possibly get a subsample of <em>all</em> the data</li>
<li>So, just by random chance, the relationship we get in our data might not be quite the same as the true relationship</li>
</ul>
<hr>
</section>
<section id="inference-error-and-randomness-1" class="level1">
<h1>Inference Error and Randomness</h1>
<ul>
<li>So if we look in a data set and see that <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> appear to be positively related to each other…</li>
<li>Are they actually positively related, or is that just random chance?</li>
<li>If they are positively related, maybe we’re understating or overstating <em>how</em> positively related</li>
</ul>
<hr>
</section>
<section id="inference-error-and-randomness-2" class="level1">
<h1>Inference Error and Randomness</h1>
<ul>
<li>If the true relationship is 0, then in the data we’ll see a positive relationship half the time, and a negative relationship half the time</li>
<li>Even though the truth is 0!</li>
<li>How can we properly make an <em>inference</em> about whether the relationship is 0 or not (or positive, or negative, or <em>how</em> positive or negative), taking into account this randomness?</li>
<li>That’s being careful about inference. The statisticians teach us all about this!</li>
</ul>
<hr>
</section>
<section id="identification-error" class="level1">
<h1>Identification Error</h1>
<ul>
<li>What is identification error?</li>
<li><em>Identification</em> is how you link the <em>result you see</em> with the <em>conclusion you draw from it</em></li>
<li>For example, say you observe that kids who play video games are more aggressive in everyday life (result), and you conclude from that result that video games make kids more aggressive (conclusion)</li>
<li>If <em>seeing that result is actually evidence for that conclusion</em>, then we are properly <em>identified</em></li>
</ul>
<hr>
</section>
<section id="identification-error-1" class="level1">
<h1>Identification Error</h1>
<ul>
<li>But if there’s another reason why we might see that result, i.e.&nbsp;if the same result could give us a different conclusion, like <em>kids who are aggressive play more video games</em> or <em>people notice aggression more when kids play video games</em>, then we have made an <em>identification error</em> - our result was not identified!</li>
<li>Identification error is when your result in the data doesn’t actually have a clear theoretical (“why” or “because”) interpretation</li>
<li>For example, if you observe that people tend to wear more shorts on days they eat more ice cream, and you conclude that eating ice cream makes you put on shorts, you have committed an identification error</li>
<li>One day in and all we can do is complain, eesh</li>
</ul>
<hr>
</section>
<section id="data-generating-process" class="level1">
<h1>Data Generating Process</h1>
<ul>
<li>To avoid identification error, economists think closely about the <em>data generating process</em></li>
<li>What is a data generating process?</li>
<li>The data generating process is the <em>true set of laws</em> that determine where our data comes from</li>
<li>For example, if you hold a rock and drop it, it falls to the floor</li>
<li>What is the data we observe? (Hold the rock &amp; Rock is up) and (Let go &amp; Rock is down)</li>
<li>What is the data generating process? Gravity makes the rock fall down when you drop it</li>
</ul>
<hr>
</section>
<section id="data-generating-process-1" class="level1">
<h1>Data Generating Process</h1>
<ul>
<li>Another example is a model of supply and demand</li>
<li>We observe prices and quantities in a competitive market</li>
<li>What led to those being the prices and quantities we see?</li>
<li>The supply and demand model and its equilibrium, we theorize!</li>
</ul>
<hr>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/(?:lse-dsi\.github\.io\/|localhost)");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><img src="../../../figures/logos/MY_INSTITUTION.png" class="img-fluid"></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Copyright 2023, London School of Economics &amp; Political Science</div>
  </div>
</footer>



</body></html>