<!DOCTYPE html>
<html lang="en"><head>
<link href="../../../figures/icons/course_favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Dr.&nbsp;George Melios">
  <meta name="dcterms.date" content="18 September 2023">
  <title>PB4A7 - Quantitative Applications for Behavioural Science - üóìÔ∏è Week 0 Presessionals</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="../../../css/styles_slides.css">
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="PB4A7 - Quantitative Applications for Behavioural Science - üóìÔ∏è Week 0 Presessionals">
<meta property="og:description" content="PB4A7- Quantitative Applications for Behavioural Science">
<meta property="og:site-name" content="PB4A7 - Quantitative Applications for Behavioural Science">
<meta name="twitter:title" content="PB4A7 - Quantitative Applications for Behavioural Science - üóìÔ∏è Week 0 Presessionals">
<meta name="twitter:description" content="PB4A7- Quantitative Applications for Behavioural Science">
<meta name="twitter:creator" content="@georgemelios">
<meta name="twitter:site" content="\www.georgemelios.com">
<meta name="twitter:card" content="summary">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block">
  <h1 class="title"><font style="font-size:1em;">üóìÔ∏è Week 0<br> Presessionals</font></h1>
  <p class="subtitle">PB4A7- Quantitative Applications for Behavioural Science</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;<a href="#/">George Melios</a> 
</div>
        <p class="quarto-title-affiliation">
            <a href="#/">London School of Economics and Political Science</a>
          </p>
    </div>
</div>

  <p class="date">18 Sep 2023</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">What we will cover today:</h2>
<ul>
<li><a href="#/check-in" id="/toc-check-in">Check-in</a></li>
<li><a href="#/difference-in-differences" id="/toc-difference-in-differences">Difference-in-Differences</a></li>
<li><a href="#/difference-in-differences-1" id="/toc-difference-in-differences-1">Difference-in-Differences</a></li>
<li><a href="#/difference-in-differences-2" id="/toc-difference-in-differences-2">Difference-in-Differences</a></li>
<li><a href="#/difference-in-differences-3" id="/toc-difference-in-differences-3">Difference-in-Differences</a></li>
<li><a href="#/difference-in-differences-4" id="/toc-difference-in-differences-4">Difference-in-Differences</a></li>
<li><a href="#/difference-in-difference" id="/toc-difference-in-difference">Difference-in-Difference</a></li>
<li><a href="#/example" id="/toc-example">Example</a></li>
<li><a href="#/example-1" id="/toc-example-1">Example</a></li>
<li><a href="#/example-2" id="/toc-example-2">Example</a></li>
<li><a href="#/difference-in-differences-5" id="/toc-difference-in-differences-5">Difference-in-Differences</a></li>
<li><a href="#/concept-checks" id="/toc-concept-checks">Concept Checks</a></li>
<li><a href="#/difference-in-difference-1" id="/toc-difference-in-difference-1">Difference-in-Difference</a></li>
<li><a href="#/difference-in-differences-6" id="/toc-difference-in-differences-6">Difference-in-Differences</a></li>
<li><a href="#/difference-in-differences-7" id="/toc-difference-in-differences-7">Difference-in-Differences</a></li>
<li><a href="#/graphically" id="/toc-graphically">Graphically</a></li>
<li><a href="#/design-vs.-regression" id="/toc-design-vs.-regression">Design vs.&nbsp;Regression</a></li>
<li><a href="#/example-3" id="/toc-example-3">Example</a></li>
<li><a href="#/example-4" id="/toc-example-4">Example</a></li>
<li><a href="#/lets-try-ols" id="/toc-lets-try-ols">Let‚Äôs try OLS!</a></li>
<li><a href="#/concept-checks-1" id="/toc-concept-checks-1">Concept Checks</a></li>
<li><a href="#/more" id="/toc-more">More!!</a></li>
<li><a href="#/more-1" id="/toc-more-1">More!!</a></li>
<li><a href="#/more-2" id="/toc-more-2">More!!</a></li>
<li><a href="#/more-3" id="/toc-more-3">More!!</a></li>
<li><a href="#/downers-and-assumptions" id="/toc-downers-and-assumptions">Downers and Assumptions</a></li>
<li><a href="#/does-it-work" id="/toc-does-it-work">Does it Work?</a></li>
<li><a href="#/parallel-trends" id="/toc-parallel-trends">Parallel Trends</a></li>
<li><a href="#/prior-trends" id="/toc-prior-trends">Prior Trends</a></li>
<li><a href="#/prior-trends-1" id="/toc-prior-trends-1">Prior Trends</a></li>
<li><a href="#/parallel-trends-1" id="/toc-parallel-trends-1">Parallel Trends</a></li>
<li><a href="#/concept-checks-2" id="/toc-concept-checks-2">Concept Checks</a></li>
<li><a href="#/and-a-warning" id="/toc-and-a-warning">And a Warning!</a></li>
</ul>
</nav>
</section>
<section>
<section id="check-in" class="title-slide slide level1">
<h1>Check-in</h1>
<ul>
<li>We‚Äôre thinking through ways that we can identify the effect of interest without having to control for everything</li>
<li>One way is by focusing on <em>within variation</em> - if all the endogeneity can be controlled for or only varies between-individuals, we can just focus on within variation to identify it</li>
<li>Pro: control for a bunch of stuff</li>
<li>Con: washes out a lot of variation! Result can be noisier if there‚Äôs not much within-variation to work with</li>
<li>Also, this requires no endogenous variation over time</li>
<li>That might be a tricky assumption! Often there are plenty of back doors that shift over time</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<ul>
<li>Today we will talk about difference-in-differences (DID), which is a way of using within variation in a more deliberate way in order to identify the effect we want</li>
<li>All we need is a treatment that <em>goes into effect</em> at a particular time, and we need a group that is <em>treated</em> and a group that is <em>not</em></li>
<li>Then, we compare the within-variation for the treated group vs.&nbsp;the within-variation for the untreated group</li>
<li>Voila, we have an effect!</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences-1" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<ul>
<li>Because the requirements to use it are so low, DID is used a <em>lot</em></li>
<li>Any time a policy is enacted but isn‚Äôt enacted everywhere at once? DID!</li>
<li>Plus, the logic is pretty straightforward</li>
<li>Notice it doesn‚Äôt even get a full chapter in the textbook? That‚Äôs not because it‚Äôs unimportant - it‚Äôs because it‚Äôs easy!</li>
<li>Here we‚Äôll cover the concept, next time some example studies</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences-2" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<ul>
<li>The question DID tries to answer is ‚Äúwhat was the effect of (some policy) on the people who were affected by it?‚Äù</li>
<li>We have some data on the people who were affected both before the policy went into effect and after</li>
<li>However, we can‚Äôt just compare before and after, because we have a back door path - Time! Things change over Time for reasons unrelated to Treatment</li>
</ul>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-1-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences-3" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<ul>
<li>Why not just control for Time? We can certainly measure that and we‚Äôve controlled for it before!</li>
<li>But we can‚Äôt! It would wash out all the variation!</li>
<li>You‚Äôre either Before and Untreated, or After and Treated. So if you control for Time, you‚Äôre comparing people with the same values of Time - who must also have the same values of Treatment! So you can‚Äôt compare Treated and Untreated to get the effect</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences-4" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<ul>
<li>The solution is to bring in a <em>control group</em> who is Untreated in both Before and After periods</li>
<li>Now the diagram looks like this</li>
<li>There‚Äôs more to control for (we have to control for Group differences too - isolate within variation), but this ALLOWS us to control for Time</li>
</ul>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-2-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-difference" class="title-slide slide level1">
<h1>Difference-in-Difference</h1>
<ul>
<li>We control for Group by isolating within variation (comparing After to Before)</li>
<li>Then we control for Time by comparing those two sources of Within variation</li>
<li>We ask <em>how much more increase</em> was there in Treatment than control?</li>
<li>The Control change is probably the increase you could have expected regardless of Treatment</li>
<li>So anything on <em>top of that</em> is the effect of Treatment</li>
<li>Now we‚Äôve controlled for Group and Time, identifying the effect!</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example" class="title-slide slide level1">
<h1>Example</h1>
<ul>
<li>Let‚Äôs say we have a pill that‚Äôs supposed to make you taller</li>
<li>Give it to a kid Adelaide who is 48 inches tall</li>
<li>Next year they‚Äôre 54 inches tall - a six inch increase! But they probably would have grown some anyway without the pill. Surely the pill doesn‚Äôt make you six inches taller.</li>
<li>SO we compare them to their twin Bella, who started at 47 inches but we DON‚ÄôT give a pill to</li>
<li>Next year that twin is 51 inches tall - a four inch increase. So Adelaide probably would have grown about 4 inches without the pill. So the pill boosted her by <span class="math inline">\((54 - 48) - (51 - 47) = 6 - 4 = 2\)</span> additional inches</li>
<li>‚ÄúAdelaide, who was Treated, grew by two <em>more inches</em> than Bella, who was Untreated, did over the same period of time, so the pill made Adelaide grow by two inches‚Äù</li>
<li>That‚Äôs DID!</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example-1" class="title-slide slide level1">
<h1>Example</h1>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-3-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="example-2" class="title-slide slide level1">
<h1>Example</h1>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-4-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences-5" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<p>What <em>changes</em> are included in each value?</p>
<ul>
<li>Untreated Before: Untreated Group Mean</li>
<li>Untreated After: Untreated Group Mean + Time Effect</li>
<li>Treated Before: Treated Group Mean</li>
<li>Treated After: Treated Group Mean + Time Effect + Treatment Effect</li>
<li>Untreated After - Before = Time Effect</li>
<li>Treated After - Before = Time Effect + Treatment Effect</li>
<li>DID = (Treated After - Before) - (Untreated After - Before) = Treatment EFfect</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="concept-checks" class="title-slide slide level1">
<h1>Concept Checks</h1>
<ul>
<li>Why do we need a control group? What does this let us do?</li>
<li>What do we need to assume is true about our control group?</li>
<li>In 2015, a new, higher minimum wage went into effect in Seattle, but this increase did not occur in some of the areas surrounding Seattle. How might you use DID to estimate the effect of this minimum wage change on employment levels?</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-difference-1" class="title-slide slide level1">
<h1>Difference-in-Difference</h1>
<ul>
<li>Of course, this only uses four data points</li>
<li>Usually these four points would be four means from lots of observations, not just two people in two time periods</li>
<li>How can we do this and get things like standard errors, and perhaps include controls?</li>
<li>Why, use OLS of course!</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences-6" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<ul>
<li>We can use what we know about binary variables and interaction terms to get our DID</li>
</ul>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1After_t + \beta_2Treated_i + \beta_3After_tTreated_i + \varepsilon_{it}\]</span> where <span class="math inline">\(After_t\)</span> is a binary variable for being in the post-treatment period, and <span class="math inline">\(Treated_t\)</span> is a binary variable for being in the treated group</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>    Person   Time Height After Treated
1 Adelaide Before     48 FALSE    TRUE
2 Adelaide  After     54  TRUE    TRUE
3    Bella Before     47 FALSE   FALSE
4    Bella  After     51  TRUE   FALSE</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="difference-in-differences-7" class="title-slide slide level1">
<h1>Difference-in-Differences</h1>
<ul>
<li>How can we interpret this using what we know?</li>
</ul>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1After_t + \beta_2Treated_i + \beta_3After_tTreated_i + \varepsilon_{it}\]</span></p>
<ul>
<li><span class="math inline">\(\beta_0\)</span> is the prediction when <span class="math inline">\(Treated_i = 0\)</span> and <span class="math inline">\(After_t = 0\)</span> <span class="math inline">\(\rightarrow\)</span> the Untreated Before mean!</li>
<li><span class="math inline">\(\beta_1\)</span> is the <em>difference between</em> Before and After for <span class="math inline">\(Treated_i = 0\)</span> <span class="math inline">\(\rightarrow\)</span> Untreated (After - Before)</li>
<li><span class="math inline">\(\beta_2\)</span> is the <em>difference between</em> Treated and Untreated for <span class="math inline">\(After_t = 0\)</span> <span class="math inline">\(\rightarrow\)</span> Before (Treated - Untreated)</li>
<li><span class="math inline">\(\beta_3\)</span> is <em>how much bigger the Before-After difference</em> is for <span class="math inline">\(Treated_i = 1\)</span> than for <span class="math inline">\(Treated_i = 0\)</span> <span class="math inline">\(\rightarrow\)</span> (Treated After - Before) - (Untreated After - Before) = DID!</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="graphically" class="title-slide slide level1">
<h1>Graphically</h1>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-6-1.gif" class="img-fluid r-stretch"></section>
<section class="slide level2">

</section></section>
<section>
<section id="design-vs.-regression" class="title-slide slide level1">
<h1>Design vs.&nbsp;Regression</h1>
<ul>
<li>Like with fixed effects, there is a distinction between <em>regression model</em> and <em>research design</em></li>
<li>We have a model with an interaction term</li>
<li>Not all models with interaction terms are DID!</li>
<li>It‚Äôs DID because it‚Äôs an interaction between treated/control and before/after</li>
<li>If you don‚Äôt have a before/after, or you don‚Äôt have a control group, that same setup may tell you something interesting but it won‚Äôt be DID!</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example-3" class="title-slide slide level1">
<h1>Example</h1>
<ul>
<li>The Earned Income Tax Credit was increased in 1993. This may increase chances single mothers (treated) return to work, but likely not affect single non-moms (control)</li>
<li>Does this program help moms get back to work?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'http://nickchk.com/eitc.csv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">mutate</span>(<span class="at">after =</span> year <span class="sc">&gt;=</span> <span class="dv">1994</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>         <span class="at">treated =</span> children <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">group_by</span>(after, treated) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="fu">summarize</span>(<span class="at">proportion_working =</span> <span class="fu">mean</span>(work))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
# Groups:   after [2]
  after treated proportion_working
  &lt;lgl&gt; &lt;lgl&gt;                &lt;dbl&gt;
1 FALSE FALSE                0.575
2 FALSE TRUE                 0.446
3 TRUE  FALSE                0.573
4 TRUE  TRUE                 0.491</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="example-4" class="title-slide slide level1">
<h1>Example</h1>
<ul>
<li>We can do it by just comparing the points, like we did with Adelaide and Bella</li>
<li>This will give us the DID estimate: The EITC increase increases the probability of working by 4.7 percentage points</li>
<li>But not standard errors, or the ability to include controls easily</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>means <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">group_by</span>(after, treated) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">summarize</span>(<span class="at">proportion_working =</span> <span class="fu">mean</span>(work)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="fu">pull</span>(proportion_working)</span>
<span id="cb4-5"><a href="#cb4-5"></a>(means[<span class="dv">4</span>] <span class="sc">-</span> means[<span class="dv">2</span>]) <span class="sc">-</span> (means[<span class="dv">3</span>] <span class="sc">-</span> means[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04687313</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="lets-try-ols" class="title-slide slide level1">
<h1>Let‚Äôs try OLS!</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>did_reg <span class="ot">&lt;-</span> <span class="fu">feols</span>(work <span class="sc">~</span> after<span class="sc">*</span>treated, <span class="at">data =</span> df)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">etable</span>(did_reg, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  did_reg
Dependent Var.:                      work
                                         
Constant                 0.575*** (0.009)
afterTRUE                  -0.002 (0.013)
treatedTRUE             -0.129*** (0.012)
afterTRUE x treatedTRUE   0.047** (0.017)
_______________________ _________________
S.E. type                             IID
Observations                       13,746
R2                                0.01260
Adj. R2                           0.01238
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="concept-checks-1" class="title-slide slide level1">
<h1>Concept Checks</h1>
<ul>
<li>There are four coefficients on the previous slide. Interpret them carefully in a sentence each.</li>
<li>Why can the <span class="math inline">\(After \times TreatedGroup\)</span> interaction stand in for <span class="math inline">\(Treated\)</span> ?</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="more" class="title-slide slide level1">
<h1>More!!</h1>
<ul>
<li>You can recognize <span class="math inline">\(After_t\)</span> and <span class="math inline">\(Treated_i\)</span> as <em>fixed effects</em></li>
<li><span class="math inline">\(Treated_i\)</span> is a fixed effect for group - we only need one coefficient for it since there are only two groups</li>
<li>And <span class="math inline">\(After_t\)</span> is a fixed effect for <em>time</em> - one coefficient for two time periods</li>
<li>You can have more than one set of fixed effects like this! Our interpretation is now within-group <em>and</em> within-time</li>
<li>(i.e.&nbsp;comparing the within-group variation across groups)</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="more-1" class="title-slide slide level1">
<h1>More!!</h1>
<ul>
<li>We can extend this to having more than two groups, some of which get treated and some of which don‚Äôt</li>
<li>And more than two time periods! Multiple before and/or multiple after</li>
<li>We don‚Äôt have a full set of interaction terms, we still only need the one, which we can now call <span class="math inline">\(CurrentlyTreated_{it}\)</span></li>
<li><strong>If you have more than two groups and/or more than two time periods, then this is what you should be doing</strong></li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="more-2" class="title-slide slide level1">
<h1>More!!</h1>
<ul>
<li>Let‚Äôs make some quick example data to show this off, with the first treated period being period 7 and the treated groups being 1 and 9, and a true effect of 3</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>did_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">group =</span> <span class="fu">sort</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">10</span>)),</span>
<span id="cb8-2"><a href="#cb8-2"></a>                   <span class="at">time =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">mutate</span>(<span class="at">CurrentlyTreated  =</span> group <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>) <span class="sc">&amp;</span> time <span class="sc">&gt;=</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">mutate</span>(<span class="at">Outcome =</span> group <span class="sc">+</span> time <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>CurrentlyTreated <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb8-5"><a href="#cb8-5"></a>did_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 √ó 4
   group  time CurrentlyTreated Outcome
   &lt;int&gt; &lt;int&gt; &lt;lgl&gt;              &lt;dbl&gt;
 1     1     1 FALSE               1.50
 2     1     2 FALSE               2.43
 3     1     3 FALSE               3.70
 4     1     4 FALSE               5.75
 5     1     5 FALSE               4.57
 6     1     6 FALSE               6.47
 7     1     7 TRUE               11.1 
 8     1     8 TRUE               12.6 
 9     1     9 TRUE               12.6 
10     1    10 TRUE               13.6 
# ‚Ñπ 90 more rows</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="more-3" class="title-slide slide level1">
<h1>More!!</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># Put group first so the clustering is on group</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>many_periods_did <span class="ot">&lt;-</span> <span class="fu">feols</span>(Outcome <span class="sc">~</span> CurrentlyTreated <span class="sc">|</span> group <span class="sc">+</span> time, <span class="at">data =</span> did_data)</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="fu">etable</span>(many_periods_did)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      many_periods_did
Dependent Var.:                Outcome
                                      
CurrentlyTreatedTRUE 3.095*** (0.4991)
Fixed-Effects:       -----------------
group                              Yes
time                               Yes
____________________ _________________
S.E.: Clustered              by: group
Observations                       100
R2                             0.96131
Within R2                      0.34238
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="downers-and-assumptions" class="title-slide slide level1">
<h1>Downers and Assumptions</h1>
<ul>
<li>So‚Ä¶ does this all work?</li>
<li>That example got pretty close to the truth of 3 but who knows in other cases!</li>
<li>What needs to be true for this to work?</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="does-it-work" class="title-slide slide level1">
<h1>Does it Work?</h1>
<ul>
<li>This gives us a causal effect as long as <em>the only reason the gap changed</em> was the treatment</li>
<li>If Adelaide would have grown six inches <em>anyway</em>, then the gap would have grown by 2, pill or not. The pill did nothing in that case! But we don‚Äôt know that and mistakenly say it helped her grow by 2</li>
<li>In fixed effects, we need to assume that there‚Äôs no uncontrolled endogenous variation across time</li>
<li>In DID, we need to assume that there‚Äôs no uncontrolled endogenous variation <em>across this particular before/after time change</em></li>
<li>An easier assumption to justify but still an assumption!</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="parallel-trends" class="title-slide slide level1">
<h1>Parallel Trends</h1>
<ul>
<li>This assumption - that nothing else changes at the same time, is the poorly-named ‚Äúparallel trends‚Äù</li>
<li>Again, this assumes that, <em>if the Treatment hadn‚Äôt happened to anyone</em>, the gap between the two would have stayed the same</li>
<li>Sometimes people check whether this assumption is plausible by seeing if <em>prior trends</em> are the same for Treated and Untreated - if we have multiple pre-treatment periods, was the gap changing a lot during that period?</li>
<li>Sometimes people also ‚Äúadjust for prior trends‚Äù to fix parallel trends violations, or use related methods like Synthetic Control (these are outside the scope of this class)</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="prior-trends" class="title-slide slide level1">
<h1>Prior Trends</h1>
<ul>
<li>Let‚Äôs see how that EITC example looks in the leadup to 1994</li>
<li>They look like the gap between them is pretty constant before 1994! They move up and down but the <em>gap</em> stays the same. That‚Äôs good.</li>
</ul>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-13-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="prior-trends-1" class="title-slide slide level1">
<h1>Prior Trends</h1>
<ul>
<li>Formally, prior trends being the same tells us nothing about parallel trends</li>
<li>But it can be suggestive. Going back to the height pill example, what if instead of comparing Adelaide and Bella, child twins, we compared Adelaide to <em>me</em>?</li>
<li>Seeing the gap closing <em>anyway</em> in previous years would be a pretty good clue that it‚Äôs not just the pill</li>
</ul>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-14-1.png" class="img-fluid r-stretch" width="768"></section>
<section class="slide level2">

</section></section>
<section>
<section id="parallel-trends-1" class="title-slide slide level1">
<h1>Parallel Trends</h1>
<ul>
<li>Just because <em>prior trends</em> are equal doesn‚Äôt mean that <em>parallel trends</em> holds.</li>
<li><em>Parallel trends</em> is about what the before-after change <em>would have been</em> - we can‚Äôt see that!</li>
<li>For example, let‚Äôs say we want to see the effect of online teaching on student test scores, using COVID school shutdowns to get a Before/After</li>
<li>As of March/April 2020, some schools had gone online (Treated) and others hadn‚Äôt (Untreated)</li>
<li>Test score trends were probably pretty similar in the Before periods (Jan/Feb 2020), so prior trends are likely the same</li>
<li>But LOTS of stuff changed between Jan/Feb and Mar/Apr, like, uh, Coronavirus, lockdowns, etc. not just online teaching! SO <em>parallel trends</em> likely wouldn‚Äôt hold</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="concept-checks-2" class="title-slide slide level1">
<h1>Concept Checks</h1>
<ul>
<li>Go back to the Seattle minimum wage effect example from the first Concept Check slide. Clearly state what the parallel trends assumption means in this context.</li>
<li>It‚Äôs possible (although perhaps unlikely) that parallel trends can hold even if it looks like the treatment and control groups were trending apart before treatment went into effect. How is this possible?</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section id="and-a-warning" class="title-slide slide level1">
<h1>And a Warning!</h1>
<ul>
<li>One other note about DID is that its popularity is relatively recent, as things go, so we‚Äôre still learning a lot about it!</li>
<li>Most relevant has to do with <em>staggered rollout DID</em></li>
<li>You may have noticed that the OLS version of DID doesn‚Äôt <em>necessarily</em> need to have treatment applied at <em>one</em> particular time</li>
<li>Say Washington gets treated in 2017, then California in 2018 - we can use these both as Treated groups and just use the same two-way fixed effects, right?</li>
<li>Well‚Ä¶ that‚Äôs what we thought for a long time. And you‚Äôll see a LOT of published studies doing this. But it turns out to actually bias results by quite a lot</li>
<li>There are more complex modern estimators for staggered rollout DID (say, in the <strong>did</strong> package), but they‚Äôre a bit much to go into for this class</li>
<li>For now, stick to DID designs where all the Treated groups are treated in the same period</li>
</ul>


<img src="../../../figures/logos/MY_INSTITUTION.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p>PB4A7- Quantitative Applications for Behavioural Science</p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>