<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;George Melios">
<meta name="dcterms.date" content="18 September 2023">

<title>PB4A7 - Quantitative Applications for Behavioural Science - ğŸ—“ï¸ Week 8 Regresssion Discontinuity Designs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../figures/icons/course_favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../css/custom_style.css">
<link rel="stylesheet" href="../../../css/syllabus.css">
<meta property="og:title" content="PB4A7 - Quantitative Applications for Behavioural Science - ğŸ—“ï¸ Week 8 Regresssion Discontinuity Designs">
<meta property="og:description" content="">
<meta property="og:image" content="slides_files/figure-html/unnamed-chunk-2-1.png">
<meta property="og:site-name" content="PB4A7 - Quantitative Applications for Behavioural Science">
<meta name="twitter:title" content="PB4A7 - Quantitative Applications for Behavioural Science - ğŸ—“ï¸ Week 8 Regresssion Discontinuity Designs">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="slides_files/figure-html/unnamed-chunk-2-1.png">
<meta name="twitter:creator" content="@georgemelios">
<meta name="twitter:site" content="\www.georgemelios.com">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">PB4A7 - Quantitative Applications for Behavioural Science</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><font style="font-size:1em;">ğŸ—“ï¸ Week 8<br> Regresssion Discontinuity Designs</font></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ  Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ““ Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/Stata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">STATA resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R &amp; Python resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ“Ÿ Communication</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">ğŸ—“ï¸ Weeks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week00/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Presessionals</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week00/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week01/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 01</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week02/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 02</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week02/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week03/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 03</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week03/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week04/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 04</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week04/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week05/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 05</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week05/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week06/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 06</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week06/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week07/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 07</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week07/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week08/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 08</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week08/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../2023/weeks/week09/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 09</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week09/page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ‘¨â€ğŸ« Lecture Material</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../2023/weeks/week01/page1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ğŸ’» Seminar Material</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">The burpees of causal inference</h2>
   
  <ul>
  <li><a href="#regression-discontinuity" id="toc-regression-discontinuity" class="nav-link active" data-scroll-target="#regression-discontinuity">Regression Discontinuity</a></li>
  <li><a href="#other-difficulties" id="toc-other-difficulties" class="nav-link" data-scroll-target="#other-difficulties">Other Difficulties</a></li>
  <li><a href="#windows" id="toc-windows" class="nav-link" data-scroll-target="#windows">Windows</a></li>
  <li><a href="#granular-running-variable" id="toc-granular-running-variable" class="nav-link" data-scroll-target="#granular-running-variable">Granular Running Variable</a></li>
  <li><a href="#looking-for-lumping" id="toc-looking-for-lumping" class="nav-link" data-scroll-target="#looking-for-lumping">Looking for Lumping</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><font style="font-size:1em;">ğŸ—“ï¸ Week 8<br> Regresssion Discontinuity Designs</font></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr.&nbsp;<a href="#">George Melios</a> </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="#">London School of Economics and Political Science</a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">18 Sep 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<style type="text/css">
pre {
  max-height: 350px;
  overflow-y: auto;
}

pre[class] {
  max-height: 100px;
}
</style>
</div>
<section id="check-in" class="level2">
<h2 class="anchored" data-anchor-id="check-in">Check-in</h2>
<ul>
<li>Weâ€™re thinking through ways that we can identify the effect of interest without having to control for everything</li>
<li>One way is by focusing on <em>within variation</em> - if all the endogeneity can be controlled for or only varies between-individuals, we can just focus on within variation to identify it</li>
<li>Pro: control for a bunch of stuff</li>
<li>Con: washes out a lot of variation! Result can be noisier if thereâ€™s not much within-variation to work with</li>
<li>Also, this requires no endogenous variation over time</li>
<li>That might be a tricky assumption! Often there are plenty of back doors that shift over time</li>
</ul>
<hr>
</section>
<section id="regression-discontinuity" class="level1">
<h1>Regression Discontinuity</h1>
<ul>
<li>Today we are going to talk about Regression discontinuity design (RDD)</li>
<li>RDD is currently the darling of the econometric world for estimating causal effects without running an experiment</li>
<li>It doesnâ€™t apply everywhere, but when it does, itâ€™s very easy to buy the identification assumptions</li>
<li>Not that it doesnâ€™t have its own issues, of course, but itâ€™s pretty good!</li>
</ul>
<hr>
<section id="regression-discontinuity-1" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-1">Regression Discontinuity</h2>
<p>The basic idea is this:</p>
<ul>
<li>We look for a treatment that is assigned on the basis of being above/below a <em>cutoff value</em> of a continuous variable</li>
<li>For example, if you get above a certain test score they let you into a â€œgifted and talentedâ€ program</li>
<li>Or if you are just on one side of a time zone line, your day starts one hour earlier/later</li>
<li>Or if a candidate gets 50.1% of the vote theyâ€™re in, 40.9% and theyâ€™re out</li>
<li>Or if youâ€™re 65 years old you get Medicaid, if youâ€™re 64.99 years old you donâ€™t</li>
</ul>
<p>We call these continuous variables â€œRunning variablesâ€ because we <em>run along them</em> until we hit the cutoff</p>
<hr>
</section>
<section id="regression-discontinuity-2" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-2">Regression Discontinuity</h2>
<ul>
<li>But wait, hold on, if treatment is driven by running variables, wonâ€™t we have a back door going through those very same running variables?? Yes!</li>
<li>And we canâ€™t just control for RunningVar because thatâ€™s where all the variation in treatment comes from. Uh oh!</li>
</ul>
<hr>
<div class="cell">
<div class="cell-output-display">
<p><img src="slides_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<hr>
</section>
<section id="regression-discontinuity-3" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-3">Regression Discontinuity</h2>
<ul>
<li>The key here is realizing that the running variable affects treatment <em>only when you go across the cutoff</em></li>
<li>So really the diagram looks like this!</li>
</ul>
<hr>
<div class="cell">
<div class="cell-output-display">
<p><img src="slides_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<hr>
</section>
<section id="regression-discontinuity-4" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-4">Regression Discontinuity</h2>
<ul>
<li>So what does this mean?</li>
<li>If we can control for the running variable <em>everywhere except the cutoff</em>, thenâ€¦</li>
<li>We will be controlling for the running variable, closing that back door</li>
<li>But leaving variation at the cutoff open, allowing for variation in treatment</li>
<li>We focus on just the variation around the treatment, narrowing the range of the running variable we use so sharply that itâ€™s basically controlled for. Then the effect of cutoff on treatment is like an experiment!</li>
</ul>
<hr>
</section>
<section id="regression-discontinuity-5" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-5">Regression Discontinuity</h2>
<ul>
<li>Basically, the idea is that <em>right around the cutoff</em>, treatment is randomly assigned</li>
<li>If you have a test score of 89.9 (not high enough for gifted-and-talented), youâ€™re basically the same as someone who has a test score of 90.0 (just barely high enough)</li>
<li>So if we just focus around the cutoff, we close any back doors because itâ€™s basically random which side of the line youâ€™re on</li>
<li>But we get variation in treatment!</li>
<li>This specifically gives us the effect of treatment <em>for people who are right around the cutoff</em> a.k.a. a â€œlocal average treatment effectâ€ (we still wonâ€™t know the effect of being put in gifted-and-talented for someone who gets a 30)</li>
</ul>
<hr>
</section>
<section id="regression-discontinuity-6" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-6">Regression Discontinuity</h2>
<ul>
<li>A very basic idea of this, before we even get to regression, is to create a <em>binned chart</em></li>
<li>And see how the bin values jump at the cutoff</li>
<li>A binned chart chops the Y-axis up into bins</li>
<li>Then takes the average Y value within that bin. Thatâ€™s it!</li>
<li>Then, we look at how those X bins relate to the Y binned values.</li>
<li>If it looks like a pretty normal, continuous relationshipâ€¦ then JUMPS UP at the cutoff X-axis value, that tells us that the treatment itself must be doing something!</li>
</ul>
<hr>
</section>
<section id="regression-discontinuity-7" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-7">Regression Discontinuity</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="slides_files/figure-html/unnamed-chunk-4-1.gif" class="img-fluid"></p>
</div>
</div>
<hr>
</section>
<section id="concept-checks" class="level2">
<h2 class="anchored" data-anchor-id="concept-checks">Concept Checks</h2>
<ul>
<li>Why is it important that we look as norrowly as possible around the cutoff? What does this get us over comparing the entire treated and untreated groups?</li>
<li>Can you think of an example of a treatment that is assigned at least partially on a cutoff?</li>
<li>Why canâ€™t we just control for the running variable as we normally would to solve the endogeneity problem?</li>
</ul>
<hr>
</section>
<section id="fitting-lines-in-rdd" class="level2">
<h2 class="anchored" data-anchor-id="fitting-lines-in-rdd">Fitting Lines in RDD</h2>
<ul>
<li>Looking purely just at the cutoff and making no use of the space <em>away</em> from the cutoff throws out a lot of useful information</li>
<li>We know that the running variable is related to outcome, so we can probably improve our <em>prediction</em> of what the value on either side of the cutoff should be if we <em>use data away from the cutoff to help with prediction</em> than if we <em>just use data near the cutoff</em>, which is what that animation does</li>
<li>We can do this with good olâ€™ OLS.</li>
<li>The bin plot we did can help us pick a functional form for the slope</li>
</ul>
<hr>
</section>
<section id="fitting-lines-in-rdd-1" class="level2">
<h2 class="anchored" data-anchor-id="fitting-lines-in-rdd-1">Fitting Lines in RDD</h2>
<ul>
<li>To be clear, producing the line(s) below is our goal. How can we do it?</li>
<li>The true model Iâ€™ve made is an RDD effect of .7, with a slope of 1 to the left of the cutoff and a slope of 1.5 to the right</li>
</ul>
<hr>
<div class="cell">
<div class="cell-output-display">
<p><img src="slides_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<hr>
</section>
<section id="regression-in-rdd" class="level2">
<h2 class="anchored" data-anchor-id="regression-in-rdd">Regression in RDD</h2>
<ul>
<li>First, we need to <em>transform our data</em></li>
<li>We need a â€œTreatedâ€ variable thatâ€™s <code>TRUE</code> when treatment is applied - above or below the cutoff</li>
<li>Then, we are going to want a bunch of things to change at the cutoff. This will be easier if the running variable is <em>centered around the cutoff</em>. So weâ€™ll turn our running variable <span class="math inline">\(X\)</span> into <span class="math inline">\(X - cutoff\)</span> and call that <span class="math inline">\(XCentered\)</span></li>
</ul>
<hr>
</section>
<section id="varying-slope" class="level2">
<h2 class="anchored" data-anchor-id="varying-slope">Varying Slope</h2>
<ul>
<li>Typically, you will want to let the slope vary to either side</li>
<li>In effect, we are fitting an entirely different regression line on each side of the cutoff</li>
<li>We can do this by interacting both slope and intercept with <span class="math inline">\(treated\)</span>!</li>
<li>Coefficient on Treated is how the intercept jumps - thatâ€™s our RDD effect. Coefficient on the interaction is how the slope changes</li>
</ul>
<p><span class="math display">\[Y = \beta_0 + \beta_1Treated + \beta_2XCentered + \beta_3Treated\times XCentered + \varepsilon\]</span></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: Y
Observations: 1,000 
Standard-errors: IID 
                        Estimate Std. Error   t value   Pr(&gt;|t|)    
(Intercept)            -0.011133   0.025999 -0.428225 0.66857986    
treatedTRUE             0.746688   0.037577 19.870777  &lt; 2.2e-16 ***
X_centered              0.982500   0.090666 10.836522  &lt; 2.2e-16 ***
treatedTRUE:X_centered  0.446961   0.129613  3.448417 0.00058748 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 0.296605   Adj. R2: 0.847229</code></pre>
</div>
</div>
<hr>
</section>
<section id="varying-slope-1" class="level2">
<h2 class="anchored" data-anchor-id="varying-slope-1">Varying Slope</h2>
<p>(as an aside, sometimes the effect of interest is the interaction term - the change in slope! This answers the question â€œdoes the effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> change at the cutoff? This is called aâ€regression kinkâ€ design. We wonâ€™t go more into it here, but it is out there!)</p>
<hr>
</section>
<section id="polynomial-terms" class="level2">
<h2 class="anchored" data-anchor-id="polynomial-terms">Polynomial Terms</h2>
<ul>
<li>We donâ€™t need to stop at linear slopes!</li>
<li>Just like we brought in our knowledge of binary and interaction terms to understand the linear slope change, we can bring in polynomials too. Add a square maybe!</li>
<li>Donâ€™t get too wild with cubes, quartics, etc. - polynomials tend to be at their â€œweirdestâ€ near the edges, and we donâ€™t want super-weird predictions right at the cutoff. It could give us a mistaken result!</li>
<li>A square term should be enough</li>
</ul>
<hr>
</section>
<section id="polynomial-terms-1" class="level2">
<h2 class="anchored" data-anchor-id="polynomial-terms-1">Polynomial Terms</h2>
<ul>
<li>How do we do this? Interactions again. Take <em>any</em> regression equationâ€¦</li>
</ul>
<p><span class="math display">\[Y = \beta_0 + \beta_1X + \beta_2X^2 + \varepsilon\]</span></p>
<ul>
<li>And just center the <span class="math inline">\(X\)</span> (letâ€™s call it <span class="math inline">\(XC\)</span>, add on a set of the same terms multiplied by <span class="math inline">\(Treated\)</span> (donâ€™t forget <span class="math inline">\(Treated\)</span> by itself - thatâ€™s <span class="math inline">\(Treated\)</span> times the interaction!)</li>
</ul>
<p><span class="math display">\[Y = \beta_0 + \beta_1XC + \beta_2XC^2 + \beta_3Treated + \beta_4Treated\times XC + \beta_5Treated\times XC^2 + \varepsilon\]</span></p>
<ul>
<li>The coefficient on <span class="math inline">\(Treated\)</span> remains our â€œjump at the cutoffâ€ - our RDD estimate!</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                              feols(Y ~ X_cent..
Dependent Var.:                                Y
                                                
Constant                        -0.0340 (0.0385)
X_centered                      0.6990. (0.3641)
treatedTRUE                   0.7677*** (0.0577)
X_centered square               -0.5722 (0.7117)
X_centered x treatedTRUE         0.7509 (0.5359)
treatedTRUE x I(X_centered^2)     0.5319 (1.034)
_____________________________ __________________
S.E. type                                    IID
Observations                               1,000
R2                                       0.84779
Adj. R2                                  0.84702
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<hr>
</section>
<section id="concept-checks-1" class="level2">
<h2 class="anchored" data-anchor-id="concept-checks-1">Concept Checks</h2>
<ul>
<li>Would the coefficient on <span class="math inline">\(Treated\)</span> still be the regression discontinuity effect estimate if we hadnâ€™t centered <span class="math inline">\(X\)</span>? Why or why not?</li>
<li>Why might we want to use a polynomial term in our RDD model?</li>
<li>What relationship are we assuming between the outcome variable and the running variable if we choose not to include <span class="math inline">\(XCentered\)</span> in our model at all (i.e.&nbsp;a â€œzero-order polynomialâ€)</li>
</ul>
<hr>
</section>
<section id="assumptions" class="level2">
<h2 class="anchored" data-anchor-id="assumptions">Assumptions</h2>
<ul>
<li>We knew there must be some assumptions lurking around here</li>
<li>Some are more obvious (we should be using the correct functional form)</li>
<li>Others are trickier. What are we assuming about the error term and endogeneity here?</li>
<li>Specifically, we are assuming that <em>the only thing jumping at the cutoff is treatment</em></li>
<li>Sort of like parallel trends, but maybe more believable since weâ€™ve narrowed in so far</li>
<li>For example, if having an income below 150% of the poverty line gets you access to food stamps AND to job training, then we canâ€™t really use that cutoff to get the effect of just food stamps</li>
<li>Or if the proportion of people who are self-employed jumps up just below 150% (based on <em>reported</em> income), thatâ€™s a back door too!</li>
<li>The only thing different about just above/just below should be treatment</li>
</ul>
<hr>
</section>
<section id="graphically" class="level2">
<h2 class="anchored" data-anchor-id="graphically">Graphically</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="slides_files/figure-html/unnamed-chunk-9-1.gif" class="img-fluid"></p>
</div>
</div>
<hr>
</section>
</section>
<section id="other-difficulties" class="level1">
<h1>Other Difficulties</h1>
<p>More assumptions, limitations, and diagnostics!</p>
<ul>
<li>Windows</li>
<li>Granular running variables</li>
<li>Manipulated running variables</li>
<li>Fuzzy regression discontinuity</li>
</ul>
<hr>
</section>
<section id="windows" class="level1">
<h1>Windows</h1>
<ul>
<li>The basic idea of RDD is that weâ€™re interested in <em>the cutoff</em></li>
<li>The points away from the cutoff are only useful in helping us predict values at the cutoff</li>
<li>Do we really want that full range? Is someoneâ€™s test score of 30 really going to help us much in predicting <span class="math inline">\(Y\)</span> at a test score of 89?</li>
<li>So we might limit our analysis within just a narrow window around the cutoff, just like that initial animation we saw!</li>
<li>This makes the exogenous-at-the-jump assumption more plausible, and lets us worry less about functional form (over a narrow range, not too much difference between a linear term and a square), but on the flip side reduces our sample size considerably</li>
</ul>
<hr>
<section id="windows-1" class="level2">
<h2 class="anchored" data-anchor-id="windows-1">Windows</h2>
<ul>
<li>Pay attention to the sample sizes, accuracy (true value .7) and standard errors!</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">feols</span>(Y<span class="sc">~</span>treated<span class="sc">*</span>X_centered, <span class="at">data =</span> df)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">feols</span>(Y<span class="sc">~</span>treated<span class="sc">*</span>X_centered, <span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">abs</span>(X_centered) <span class="sc">&lt;</span> .<span class="dv">25</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">feols</span>(Y<span class="sc">~</span>treated<span class="sc">*</span>X_centered, <span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">abs</span>(X_centered) <span class="sc">&lt;</span> .<span class="dv">1</span>))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>m4 <span class="ot">&lt;-</span> <span class="fu">feols</span>(Y<span class="sc">~</span>treated<span class="sc">*</span>X_centered, <span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">abs</span>(X_centered) <span class="sc">&lt;</span> .<span class="dv">05</span>))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>m5 <span class="ot">&lt;-</span> <span class="fu">feols</span>(Y<span class="sc">~</span>treated<span class="sc">*</span>X_centered, <span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">abs</span>(X_centered) <span class="sc">&lt;</span> .<span class="dv">01</span>))</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(m1,m2,m3,m4,m5, <span class="at">keep =</span> <span class="st">'treatedTRUE'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                         m1                 m2
Dependent Var.:                           Y                  Y
                                                              
treatedTRUE              0.7467*** (0.0376) 0.7723*** (0.0566)
treatedTRUE x X_centered 0.4470*** (0.1296)   0.6671. (0.4022)
________________________ __________________ __________________
S.E. type                               IID                IID
Observations                          1,000                492
R2                                  0.84769            0.74687
Adj. R2                             0.84723            0.74531

                                         m3                 m4              m5
Dependent Var.:                           Y                  Y               Y
                                                                              
treatedTRUE              0.7086*** (0.0900) 0.6104*** (0.1467) 0.5585 (0.4269)
treatedTRUE x X_centered     -1.307 (1.482)      6.280 (4.789)   41.21 (72.21)
________________________ __________________ __________________ _______________
S.E. type                               IID                IID             IID
Observations                            206                 93              15
R2                                  0.69322            0.59825         0.48853
Adj. R2                             0.68867            0.58470         0.34904
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="granular-running-variable" class="level1">
<h1>Granular Running Variable</h1>
<ul>
<li>One assumption weâ€™re making is that the running variable varies more or less <em>continuously</em></li>
<li>That makes it possible to have, say, a test score of 89 compared to a test score of 90 itâ€™s almost certainly the same as except for random chance</li>
<li>But what if our data only had test score in big chunks? I donâ€™t know youâ€™re 89 or 90, I just know youâ€™re â€œ80-89â€ or â€œ90-100â€</li>
<li>A lot less believable that the only difference between these groups is random chance and weâ€™ve closed the back doors by focusing on the cutoff</li>
<li>Plenty of other things change between 80 and 100! Thatâ€™s not â€œsmooth at the cutoffâ€</li>
</ul>
<hr>
<section id="granular-running-variable-1" class="level2">
<h2 class="anchored" data-anchor-id="granular-running-variable-1">Granular Running Variable</h2>
<ul>
<li>Not a whole lot we can do about this</li>
<li>There are some fancy RDD estimators that allow for granular running variables</li>
<li>But in general, if this is what youâ€™re facing, you might be in trouble</li>
<li>Before doing an RDD, think â€œis it plausible that someone with the highest value just below the cutoff, and someone with the lowest value just above the cutoff are only at different values because of random chance?â€</li>
</ul>
<hr>
</section>
</section>
<section id="looking-for-lumping" class="level1">
<h1>Looking for Lumping</h1>
<ul>
<li>Ok, now letâ€™s go back to our continuous running variables</li>
<li>What if the running variable is <em>manipulated</em>?</li>
<li>Imagine youâ€™re a teacher grading the gifted-and-talented exam. You see someone with an 89 and think â€œaww, theyâ€™re so close! Iâ€™ll just give them an extra pointâ€¦â€</li>
<li>Or, if you live just barely on one side of a time zone line, but decide to move to the other side because you prefer waking up later</li>
<li>Suddenly, that treatment is a lot less randomly assigned around the cutoff!</li>
</ul>
<hr>
<section id="looking-for-lumping-1" class="level2">
<h2 class="anchored" data-anchor-id="looking-for-lumping-1">Looking for Lumping</h2>
<ul>
<li>If thereâ€™s manipulation of the running variable around the cutoff, we can often see it in the presence of <em>lumping</em></li>
<li>I.e. if thereâ€™s a big cluster of observations to one side of the cutoff and a seeming gap missing on the other side</li>
</ul>
<hr>
</section>
<section id="looking-for-lumping-2" class="level2">
<h2 class="anchored" data-anchor-id="looking-for-lumping-2">Looking for Lumping</h2>
<ul>
<li>Hereâ€™s an example from the real world in medical research - statistically, p-values <em>should</em> be uniformly distributed</li>
<li>But itâ€™s hard to get insignificant results published in some journals. So people might â€œp-hackâ€ until they find some form of analysis thatâ€™s significant, and also we have heavy selection into publication based on <span class="math inline">\(p &lt; .05\)</span>. Canâ€™t use that cutoff for an RDD!</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="p_value_distribution.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">p-value graph from Perneger &amp; Combescure, 2017</figcaption>
</figure>
</div>
<hr>
</section>
<section id="looking-for-lumping-3" class="level2">
<h2 class="anchored" data-anchor-id="looking-for-lumping-3">Looking for Lumping</h2>
<ul>
<li>How can we look for this stuff?</li>
<li>We can look graphically by just checking for a jump at the cutoff in <em>number of observations</em> after binning</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_bin_count <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select breaks so that one of hte breakpoints is the cutoff</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">X_bins =</span> <span class="fu">cut</span>(X, <span class="at">breaks =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">10</span><span class="sc">/</span><span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(X_bins) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="looking-for-lumping-4" class="level2">
<h2 class="anchored" data-anchor-id="looking-for-lumping-4">Looking for Lumping</h2>
<ul>
<li>The first one looks pretty good. We have one that looks not-so-good on the right</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="slides_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<hr>
</section>
<section id="looking-for-lumping-5" class="level2">
<h2 class="anchored" data-anchor-id="looking-for-lumping-5">Looking for Lumping</h2>
<ul>
<li>Another thing we can do is do a â€œplacebo testâ€</li>
<li>Check if variables <em>other than treatment or outcome</em> vary at the cutoff</li>
<li>We can do this by re-running our RDD but just swapping out some other variable for our outcome</li>
<li>If we get a significant jump, thatâ€™s bad! That tells us that <em>other things are changing at the cutoff</em> which implies some sort of manipulation (or just super lousy luck)</li>
</ul>
<hr>
</section>
<section id="regression-discontinuity-in-r" class="level2">
<h2 class="anchored" data-anchor-id="regression-discontinuity-in-r">Regression Discontinuity in R</h2>
<ul>
<li>We can specify an RDD model by just telling it the dependent variable <span class="math inline">\(Y\)</span>, the running variable <span class="math inline">\(X\)</span>, and the cutoff <span class="math inline">\(c\)</span>.</li>
<li>We can also specify how many polynomials to us with <strong>p</strong></li>
<li>(it applies the polynomials more locally than our linear OLS models do - a bit more flexible without weird corner preditions)</li>
<li>It will also pick a window for us with <strong>h</strong></li>
<li>Plenty of other options</li>
<li>Including a <strong>fuzzy</strong> option to specify actual treatment outside of the running variable/cutoff combo</li>
</ul>
<hr>
</section>
<section id="rdrobust" class="level2">
<h2 class="anchored" data-anchor-id="rdrobust">rdrobust</h2>
<ul>
<li>Weâ€™ve gone through all kinds of procedures for doing RDD in R already using regression</li>
<li>But often, professional researchers wonâ€™t do it that way!</li>
<li>Weâ€™ll use packages and formulas that do things like â€œpicking a bandwidth (window)â€ for us in a smart way, or not relying so strongly on linearity</li>
<li>The <strong>rdrobust</strong> package does just that!</li>
</ul>
<hr>
</section>
<section id="rdrobust-1" class="level2">
<h2 class="anchored" data-anchor-id="rdrobust-1">rdrobust</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">rdrobust</span>(df<span class="sc">$</span>Y, df<span class="sc">$</span>X, <span class="at">c =</span> .<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                 1000
BW type                       mserd
Kernel                   Triangular
VCE method                       NN

Number of Obs.                  501          499
Eff. Number of Obs.             185          170
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.174        0.174
BW bias (b)                   0.293        0.293
rho (h/b)                     0.594        0.594
Unique Obs.                     501          499

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional     0.707     0.085     8.311     0.000     [0.540 , 0.874]     
        Robust         -         -     6.762     0.000     [0.484 , 0.878]     
=============================================================================</code></pre>
</div>
</div>
<hr>
</section>
<section id="rdrobust-2" class="level2">
<h2 class="anchored" data-anchor-id="rdrobust-2">rdrobust</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">rdrobust</span>(df<span class="sc">$</span>Y, df<span class="sc">$</span>X, <span class="at">c =</span> .<span class="dv">5</span>, <span class="at">fuzzy =</span> df<span class="sc">$</span>treatment))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                 1000
BW type                       mserd
Kernel                   Triangular
VCE method                       NN

Number of Obs.                  501          499
Eff. Number of Obs.             185          170
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.174        0.174
BW bias (b)                   0.293        0.293
rho (h/b)                     0.594        0.594
Unique Obs.                     501          499

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional     0.707     0.085     8.311     0.000     [0.540 , 0.874]     
        Robust         -         -     6.762     0.000     [0.484 , 0.878]     
=============================================================================</code></pre>
</div>
</div>
<hr>
</section>
<section id="rdrobust-3" class="level2">
<h2 class="anchored" data-anchor-id="rdrobust-3">rdrobust</h2>
<ul>
<li>We can even have it automatically make plots of our RDD! Same syntax</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rdplot</span>(df<span class="sc">$</span>Y, df<span class="sc">$</span>X, <span class="at">c =</span> .<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="slides_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<hr>
</section>
<section id="thats-it" class="level2">
<h2 class="anchored" data-anchor-id="thats-it">Thatâ€™s it!</h2>
<ul>
<li>Thatâ€™s what we have for RDD</li>
<li>Go explore the regression discontinuity Seminar</li>
<li>And the paper to read!</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/(?:lse-dsi\.github\.io\/|localhost)");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><img src="../../../figures/logos/MY_INSTITUTION.png" class="img-fluid"></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Copyright 2023, London School of Economics &amp; Political Science</div>
  </div>
</footer>



</body></html>